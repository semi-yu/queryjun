-- 0. Create an user
CREATE USER ${POSTGRES_USERNAME} WITH PASSWORD '${POSTGRES_PASSWORD}';

-- 1. Set database and grant marker to connect
-- CREATE DATABASE ${POSTGRES_DB};
GRANT CONNECT ON DATABASE ${POSTGRES_DB} TO ${POSTGRES_USERNAME};

-- 2. Connect to the database
\c ${POSTGRES_DB}

-- 3. Manupulate database
GRANT ALL PRIVILEGES ON DATABASE ${POSTGRES_DB} TO ${POSTGRES_USERNAME};
GRANT USAGE, CREATE ON SCHEMA public TO ${POSTGRES_USERNAME};